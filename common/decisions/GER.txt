#Category only allowed for GER
operations = {



	GER_operation_weserubung = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		allowed = { tag = GER }
		available = { has_completed_focus = GER_weserubung	}
		cost = 0
		complete_effect = {

		
		    hidden_effect = {
			    ENG = { add_to_faction = DEN }  
				ENG = { add_to_faction = NOR }  

				DEN = { add_to_war = { targeted_alliance = ENG enemy = GER } }
				NOR = { add_to_war = { targeted_alliance = ENG enemy = GER } }

			}


		}
	}

	GER_fall_weiss = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		allowed = { tag = GER }
		available = { has_completed_focus = GER_danzig_or_war date > 1939.08.1	}
		cost = 0
		complete_effect = {

			hidden_effect = {
				ENG = { add_to_faction = POL }
				declare_war_on = {
					target = POL
					type = annex_everything
				}
				POL={declare_war_on_enemy_faction =yes}

			}


		}
	}

	GER_fall_gelb = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		allowed = {  tag = GER }
		available = {  GER = { controls_state = 10 }GER = {has_completed_focus =GER_around_maginot}  }
		cost = 0
		complete_effect = {

			hidden_effect = {
			    ENG = { add_to_faction = LUX}  
				ENG = { add_to_faction = HOL }  
				ENG = { add_to_faction = BEL }  
				LUX = { add_to_war = { targeted_alliance = ENG enemy = GER } }
				HOL = { add_to_war = { targeted_alliance = ENG enemy = GER } }
				BEL = { add_to_war = { targeted_alliance = ENG enemy = GER } }
			}


		}
	}
	GER_fall_barb = {
		icon = ger_reichskommissariats
		fire_only_once = yes
		allowed = { tag = GER }
		available = { has_completed_focus = GER_ussr_war_goal date > 1941.06.21	}
		cost = 0
		complete_effect = {


			hidden_effect={
				SOV={declare_war_on_enemy_faction =yes}
				GER = {
					add_timed_idea = { idea = GER_barbarossa days = 175 }
					add_dynamic_modifier = { modifier = Ostarbeiter scope=GER }
				}

				ROM = {
					add_timed_idea = { idea = GER_barbarossa_inf days = 175 }
				}
				HUN = {
					add_timed_idea = { idea = GER_barbarossa days = 175 }
				}
				BUL = {
					add_timed_idea = { idea = GER_barbarossa_inf days = 175 }
				}

				SPR = {
					add_timed_idea = { idea = GER_barbarossa days = 175 }
				}

				}}}

	GER_iran = {
		icon = generic_operation
		fire_only_once = yes
		allowed = { original_tag = GER }
		visible = {
			ENG = {NOT ={controls_state = 291}}
		}
		is_good = yes
		available = {
			Date > 1940.3.1
		}
		days_remove = 30

		complete_effect = {
			hidden_effect = {
				every_enemy_country = {
					country_event = {
						id = news.iran
						days = 0
					}
				}
			}
		}
		remove_effect = {
			SOV = { country_event = { id = iran.2}}
			hidden_effect={every_country= { limit={NOT={tag=SOV}} country_event = { id = iran.3 } }}
		}
	}



	GER_jaegernotprogramm = {

		icon = generic_air
		allowed = {
			tag = GER
		}
		available = {
			GER ={has_war_with = SOV}
			tag=GER

		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 1
		}

		visible = {

			GER ={has_war_with = SOV}

		}

		complete_effect = {
			add_timed_idea = { idea = GER_jaegernotprogramm days = 100 }
		}
	}
	GER_fuelsavingmeasures = {

		icon = generic_air
		allowed = {
			tag = GER
		}
		available = {
			GER ={has_war_with = SOV}
			tag=GER

		}

		cost = 50
		fire_only_once = no
		ai_will_do = {
			factor = 1
		}

		visible = {

			GER ={has_war_with = SOV}

		}

		complete_effect = {
			add_timed_idea = { idea = GER_fuelsavingmeasures days = 60 }
		}
	}




	GER_fin = {
		icon = generic_operation
		fire_only_once = yes
		allowed = {
			tag = GER
		}
		visible = {
			Date > 1941.1.1
		}

		available = {
			Date > 1941.6.1
		}


		complete_effect = {
			GER =  { puppet = FIN}
		}
	}
	GER_pressure_sweden = {
		icon = generic_operation
		fire_only_once = no
		allowed = {
			tag = GER
		}
		visible = {
			date > 1940.1.1
		}

		available = {

			has_completed_focus=GER_pressure_sweden
			NOR_axis=yes
			NOT={has_global_flag=GER_resource_rights_swe}
		}
		cost=50
		days_remove=30
		remove_effect = {
			SWE = {
				give_resource_rights = { receiver = GER state = 666 }

			}
			set_global_flag=GER_resource_rights_swe
		}
	}

	GER_Anton = {

		icon = generic_operation

		fire_only_once = yes
		allowed = {
			tag = GER
		}
		visible = {

			tag = GER
			Date > 1940.1.1
		}


		available = {

			AND={EFR = { has_war_with = ENG }

				date > 1942.3.1}




		}

		days_remove = 30
		remove_effect = {

			annex_country = { target = EFR transfer_troops = yes }

		}

	}

	GER_seize_syria = {

		icon = generic_operation

		fire_only_once = yes

		allowed = {
			tag = GER
		}
		visible = {
			tag = GER
			EFR = {
				exists = yes
			}
			EFR = {
				owns_state = 553
				owns_state = 554
				owns_state = 680
				owns_state = 677
			}
		}

		days_remove = 10

		available = {
			any_country = {
				is_in_faction_with = ROOT
				controls_state = 455
			}
			any_country = {
				is_in_faction_with = ROOT
				controls_state = 454
			}
		}

		complete_effect = {
			hidden_effect = {
				every_enemy_country = {
					country_event = {
						id = germany.121
						days = 0
					}
				}
			}
		}

		remove_effect = {
			transfer_state = 553
			transfer_state = 554
			transfer_state = 680
			transfer_state = 677
			553 = {
				set_demilitarized_zone = no
			}
			554 = {
				set_demilitarized_zone = no
			}
			680 = {
				set_demilitarized_zone = no
			}
			677 = {
				set_demilitarized_zone = no
			}
		}
	}

	GER_barbarossa_mission = {

		icon = generic_operation

		allowed = {
			always = no
			original_tag = GER
			#added through on_action
		}

		available = {
			219 = { is_controlled_by_ROOT_or_ally = yes }
			195 = { is_controlled_by_ROOT_or_ally = yes }
			202 = { is_controlled_by_ROOT_or_ally = yes }
			217 = { is_controlled_by_ROOT_or_ally = yes }
		}

		days_mission_timeout = 180
		fire_only_once = yes

		activation = {

		}

		is_good = no

		complete_effect = {
			add_war_support = 0.1
			custom_effect_tooltip = barbarossa_mission_tt
		}

		timeout_effect = {

		}

		ai_will_do = {
			factor = 1
		}
	}
}

#Category only allowed for GER
GER_military_buildup = {


}

special_projects = {
	GER_begin_heavy_water_production = {
		allowed = {
			original_tag = GER
			has_dlc = "La Resistance"
		}
		available = {
			110 = {
				CONTROLLER = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		visible = {}
		cost = 0
		ai_will_do = {
			factor = 5
		}
		cancel_trigger = { NOT = { has_global_flag = GER_heavy_water_production_underway } } #can be removed via intelligence ops
		days_remove = 365
		remove_effect = {
			add_tech_bonus = {
				name = GER_heavy_water
				category = nuclear
				uses = 2
				bonus = 2
			}
		}
		complete_effect = { set_global_flag = GER_heavy_water_production_underway }
	}
	GER_dismantle_maginot = {

		icon = generic_construction

		allowed = {
			original_tag = GeR
		}

		available = {
			#has_war = yes
			controls_state = 28
			NOT={has_idea=GER_dismantle_czechoslovakian_forts}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			#has_war = yes
			controls_state = 28
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			28 = {
				set_building_level = {
					type = bunker
					level = 2
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 2
					}
				}
			}
		}
		complete_effect = {
			add_timed_idea = { idea = GER_dismantle_maginot days = 180 }

		}
	}
	GER_dismantle_czechoslovakian_forts = {

		icon = generic_construction

		allowed = {
			original_tag = GeR
		}

		available = {
			#has_war = yes
			controls_state = 69 # Sudetenland
			controls_state = 74 # Eastern Sudetenland
			controls_state = 9 # Bohemia
			controls_state = 75 # Moravia
			NOT={has_idea=GER_dismantle_maginot}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			#has_war = yes
			controls_state = 69 # Sudetenland
			controls_state = 74 # Eastern Sudetenland
			controls_state = 9 # Bohemia
			controls_state = 75 # Moravia
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			69 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			74 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			9 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			75 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			if = {
				limit = {
					72 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
					71 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				72 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
				71 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
			}
			if = {
				limit = {
					70 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				70 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
			}
			if = {
				limit = {
					73 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
					664 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				73 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
				664 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
			}
		}
		complete_effect = {
			add_timed_idea = { idea = GER_dismantle_czechoslovakian_forts days = 180 }
		}
	}
}

GER_reichswerke_four_year_plan = {

	GER_four_year_plan_steel = {

		icon = steel

		allowed = {
			original_tag = GER
		}
		available = {
			FROM = {
				infrastructure > 7
				has_resources_amount = {
					resource = steel
					amount > 0
				}
			}
			ROOT = { num_of_civilian_factories > 3 }
		}
		visible = {
			original_tag = GER
			has_country_flag = GER_reichswerke_steel_decisions
			FROM = {
				infrastructure > 7
				has_resources_amount = {
					resource = steel
					amount > 0
				}
			}
		}

		state_target = yes
		target_array = controlled_states

		highlight_state_targets = { state = FROM }
		on_map_mode = map_and_decisions_view

		cost = 10
		days_remove = 10

		is_good = yes
		fire_only_once = no

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {

		}
		remove_effect = {
			add_resource = {
				type = steel
				amount = 5
				state = FROM
			}
		}
	}

	GER_four_year_plan_aluminum = {

		icon = aluminium

		allowed = {
			original_tag = GER
		}
		available = {
			FROM = {
				infrastructure > 7
				has_resources_amount = {
					resource = aluminium
					amount > 0
				}
			}
			ROOT = { num_of_civilian_factories > 3 }
		}
		visible = {
			original_tag = GER
			has_country_flag = GER_reichswerke_aluminum_decisions
			FROM = {
				infrastructure > 7
				has_resources_amount = {
					resource = aluminium
					amount > 0
				}
			}
		}

		state_target = yes
		target_array = controlled_states

		highlight_state_targets = { state = FROM }
		on_map_mode = map_and_decisions_view

		cost = 10
		days_remove = 10

		is_good = yes
		fire_only_once = no

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {

		}
		remove_effect = {
			add_resource = {
				type = aluminium
				amount = 5
				state = FROM
			}
		}
	}

	GER_four_year_plan_synthetic = {

		icon = rubber

		allowed = {
			original_tag = GER
		}
		available = {
			FROM = {
				infrastructure > 9
				synthetic_refinery < 3
			}
		}
		visible = {
			original_tag = GER
			has_country_flag = GER_reichswerke_refinery_decisions
			FROM = {
				infrastructure > 9
				synthetic_refinery < 3
			}
		}

		state_target = yes
		target_array = controlled_states

		highlight_state_targets = { state = FROM }
		on_map_mode = map_and_decisions_view

		cost = 10

		is_good = yes
		fire_only_once = no

		complete_effect = {
			FROM = {
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
		}
	}

	GER_four_year_plan_silos = {

		icon = oil

		allowed = {
			original_tag = GER
		}
		available = {
			FROM = {
				infrastructure > 5
				fuel_silo < 3
			}
		}
		visible = {
			original_tag = GER
			has_country_flag = GER_reichswerke_silo_decisions
			FROM = {
				infrastructure > 5
				fuel_silo < 3
			}
		}

		state_target = yes
		target_array = controlled_states

		highlight_state_targets = { state = FROM }
		on_map_mode = map_and_decisions_view

		cost = 10

		is_good = yes
		fire_only_once = no

		complete_effect = {
			FROM = {
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
		}
	}

	GER_plan_z = {

		icon = generic_naval

		available = {
			has_navy_size = {
				unit = battleship
				size > 9
			}
			has_navy_size = {
				unit = battle_cruiser
				size > 2
			}
			has_navy_size = {
				unit = carrier
				size > 3
			}
			has_navy_size = {
				unit = heavy_cruiser
				size > 19
			}
			has_navy_size = {
				unit = light_cruiser
				size > 19
			}
			has_navy_size = {
				unit = destroyer
				size > 99
			}
		}

		fire_only_once = yes
		days_mission_timeout = 1800
		is_good = no
		activation = {
			has_completed_focus = GER_plan_z
		}


		visible = {
			has_completed_focus = GER_plan_z
		}

		complete_effect = {
			add_war_support = 0.05
			navy_experience = 150
		}


	}
}
