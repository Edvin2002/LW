

#Category only allowed for SOV


operations = {
	sov_spawn = {
		icon = eng_blackshirt_march
		fire_only_once = yes
		allowed = {tag = SOV}
		available = {
			has_war = no
			date > 1941.1.1
		}
		visible = {
		}
		complete_effect = {
			hidden_effect = {
				division_template = {
					name = "Filler"
					regiments = {
						infantry = { x = 0 y = 0 }
					}
				}
				load_oob = "sov_spawn"
			}
			custom_effect_tooltip = "Spawns a 2w division in every province between Moscow and the Axis front. g
			They would require 6.5M manpower and 650K guns to fully equip as 20w"
		}
	}
	sov_spawn2 = {
		icon = eng_blackshirt_march
		fire_only_once = yes
		allowed = {tag = SOV}
		available = {
			has_war = no
			date > 1941.1.1
		}
		visible = {
		}
		complete_effect = {
			hidden_effect = {
				division_template = {
					name = "Filler"
					regiments = {
						infantry = { x = 0 y = 0 }
					}
				}
				load_oob = "sov_spawn"
			}
			custom_effect_tooltip = "Spawns a 2w division in every province between Moscow and the Axis front. g
			They would require 6.5M manpower and 650K guns to fully equip as 20w"
		}
	}
}

SOV_mrp = {

	SOV_prepare_finland = {

		icon = generic_prepare_civil_war
		allowed={tag=SOV}
		available = {
			date > 1948.1.1
		}
		fire_only_once = yes
		cost = 0
		fire_only_once = yes
		days_remove = 60
		visible={date > 1948.1.1}
		ai_will_do = {
			factor = 1
		}


		complete_effect = {
			add_named_threat = { threat = 7.5 name = Winter_War_Threat }
		}
		remove_effect = {
			SOV = { activate_decision = SOV_attack_finland  }
			custom_effect_tooltip= "Preparations completed"
		}
	}
	SOV_attack_finland = {

		icon = generic_prepare_civil_war
		allowed={tag=sov}
		available = {

			custom_trigger_tooltip= {tooltip="Preparations completed" has_country_flag=finland_prepared}
		}



		cost = 0
		fire_only_once = yes
		visible = {
			GER={has_completed_focus=GER_mol_rib_pact}
		}

		ai_will_do = {
			factor = 1
		}


		complete_effect = {
			SOV = {
				army_experience = 200
				transfer_state = 146
				transfer_state= 147
				country_event = { id = finland.8 }
				146 = { remove_core_of = FIN }
				147 = { remove_core_of = FIN }

			}
			hidden_effect = {
				FIN = {
					load_oob = "FIN_barb"
				}
			}
		}
	}
}




	

SOV_great_patriotic_war = {

	SOV_move_capital_kazan={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			249={is_capital=no}}
		complete_effect={
			set_capital=249
		}
	}
	SOV_move_capital_stalingrad={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			217={is_capital=no}}
		complete_effect={
			set_capital=217
		}
	}
	SOV_move_capital_leningrad={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			195={is_capital=no}}
		complete_effect={
			set_capital=195
		}
	}
	SOV_move_capital_moscow={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			219={is_capital=no}}
		complete_effect={
			set_capital=219
		}
	}


	#217 "Stalingrad"
	SOV_hold_stalingrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 217 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			has_civil_war = no
			217 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			217 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.1
		}
		#Fail
		complete_effect = {
			217 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.2
		}
	}

	#195 "Leningrad"
	SOV_hold_leningrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 195 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			has_civil_war = no
			195 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.3
		}
		#Fail
		complete_effect = {
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.4
		}
	}

	#219 "Moscow"
	SOV_hold_moscow = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 219 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			has_civil_war = no
			219 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.5
		}
		#Fail
		complete_effect = {
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.6
		}
	}

	SOV_hero_city_moscow = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			219 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 6414
						id = 6380
						id = 301
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_leningrad = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			195 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3515
						id = 149
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_stalingrad = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			217 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3529
						id = 11474
						id = 498
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_kiev = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			202 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 525
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_smolensk = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			242 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 306
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_minsk = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			206 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11370
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_tula = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			223 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 6262
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_sevastopol = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			137 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3686
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_odessa = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {

		}

		visible = {

		}

		cost = 75
		fire_only_once = yes

		complete_effect = {
			192 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11670
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}
