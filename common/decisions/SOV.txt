

#Category only allowed for SOV

debug_decisions = {

	Test_Soviet_Front_Debug_Full_Infra_Damage = {
		icon = generic_prepare_civil_war
		allowed={ tag = sov }
		available = {
			is_ai = no
		}

		cost = 0
		fire_only_once = yes
		visible = {
			is_ai = no
		}

		complete_effect = {
			SOV = {
				transfer_state = 96
				transfer_state = 95
				transfer_state = 94
				transfer_state = 93
				transfer_state = 91
				transfer_state = 97
				transfer_state = 89
				transfer_state = 784
				transfer_state = 766
				transfer_state = 78

				annex_country = { target = LAT }
				annex_country = { target = EST }
				annex_country = { target = LIT }
			}
			GER = {
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
				annex_country = { target = POL }
			}
			every_state = {
				limit = {
					is_core_of = SOV
					NOT = { has_state_flag = scorched_infrastructure_done }
				}
				damage_building = {
					type = infrastructure
					damage = 5
				}
				set_state_flag = scorched_infrastructure_done
			}
		}
	}
	Test_Soviet_Front_Debug_Partial_Infra_Damage = {
		icon = generic_prepare_civil_war
		allowed={ tag = sov }
		available = {
			is_ai = no
		}

		cost = 0
		fire_only_once = yes
		visible = {
			is_ai = no
		}

		complete_effect = {
			SOV = {
				transfer_state = 96
				transfer_state = 95
				transfer_state = 94
				transfer_state = 93
				transfer_state = 91
				transfer_state = 97
				transfer_state = 89
				transfer_state = 784
				transfer_state = 766
				transfer_state = 78

				annex_country = { target = LAT }
				annex_country = { target = EST }
				annex_country = { target = LIT }
			}
			GER = {
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
				annex_country = { target = POL }
			}
			every_state = {
				limit = {
					is_core_of = SOV
					NOT = { has_state_flag = scorched_infrastructure_done }
				}
				damage_building = {
					type = infrastructure
					damage = 2
				}
				set_state_flag = scorched_infrastructure_done
			}
		}
	}
	Test_Soviet_Front_Debug_NO_Infra_Damage = {
		icon = generic_prepare_civil_war
		allowed={ tag = sov }
		available = {
			is_ai = no
		}

		cost = 0
		fire_only_once = yes
		visible = {
			is_ai = no
		}

		complete_effect = {
			SOV = {
				transfer_state = 96
				transfer_state = 95
				transfer_state = 94
				transfer_state = 93
				transfer_state = 91
				transfer_state = 97
				transfer_state = 89
				transfer_state = 784
				transfer_state = 766
				transfer_state = 78

				annex_country = { target = LAT }
				annex_country = { target = EST }
				annex_country = { target = LIT }
			}
			GER = {
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
				annex_country = { target = POL }
			}
		}
	}
}

operations = {
	sov_spawn = {
		icon = eng_blackshirt_march
		fire_only_once = yes
		allowed = {tag = SOV}
		available = {
			has_war = no
			date > 1941.1.1
		}
		visible = {
		}
		complete_effect = {
			hidden_effect = {
				division_template = {
					name = "Filler"
					regiments = {
						infantry = { x = 0 y = 0 }
					}
				}
				load_oob = "sov_spawn"
			}
			custom_effect_tooltip = "Spawns a 2w division in every province between Moscow and the Axis front. g
			They would require 6.5M manpower and 650K guns to fully equip as 20w"
		}
	}
	sov_spawn2 = {
		icon = eng_blackshirt_march
		fire_only_once = yes
		allowed = {tag = SOV}
		available = {
			has_war = no
			date > 1941.1.1
		}
		visible = {
		}
		complete_effect = {
			hidden_effect = {
				division_template = {
					name = "Filler"
					regiments = {
						infantry = { x = 0 y = 0 }
					}
				}
				load_oob = "sov_spawn"
			}
			custom_effect_tooltip = "Spawns a 2w division in every province between Moscow and the Axis front. g
			They would require 6.5M manpower and 650K guns to fully equip as 20w"
		}
	}
}

SOV_mrp = {

	SOV_prepare_finland = {

		icon = generic_prepare_civil_war
		allowed={tag=SOV}
		available = {
			date > 1948.1.1
		}
		fire_only_once = yes
		cost = 0
		fire_only_once = yes
		days_remove = 60
		visible={date > 1948.1.1}
		ai_will_do = {
			factor = 1
		}


		complete_effect = {
			add_named_threat = { threat = 7.5 name = Winter_War_Threat }
		}
		remove_effect = {
			SOV = { activate_decision = SOV_attack_finland  }
			custom_effect_tooltip= "Preparations completed"
		}
	}
	SOV_attack_finland = {

		icon = generic_prepare_civil_war
		allowed={tag=sov}
		available = {

			custom_trigger_tooltip= {tooltip="Preparations completed" has_country_flag=finland_prepared}
		}



		cost = 0
		fire_only_once = yes
		visible = {
			GER={has_completed_focus=GER_mol_rib_pact}
		}

		ai_will_do = {
			factor = 1
		}


		complete_effect = {
			SOV = {
				army_experience = 200
				transfer_state = 146
				transfer_state= 147
				country_event = { id = finland.8 }
				146 = { remove_core_of = FIN }
				147 = { remove_core_of = FIN }

			}
			hidden_effect = {
				FIN = {
					load_oob = "FIN_barb"
				}
			}
		}
	}
}






SOV_great_patriotic_war = {

	SOV_scorched_earth_mission = {

		icon = revolt
		priority = 100
		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			has_war = no
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
		}

		#Success
		timeout_effect = {
			every_state = {
				limit = {
					is_core_of = SOV
					NOT = { is_fully_controlled_by = SOV }
					NOT = { has_state_flag = scorched_infrastructure_done }
				}
				damage_building = {
					type = infrastructure
					damage = 5
				}
				set_state_flag = scorched_infrastructure_done
			}
		}
		#Fail
		complete_effect = {

		}
	}

	SOV_move_capital_kazan={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			249={is_capital=no}}
		complete_effect={
			set_capital=249
		}
	}
	SOV_move_capital_stalingrad={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			217={is_capital=no}}
		complete_effect={
			set_capital=217
		}
	}
	SOV_move_capital_leningrad={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			195={is_capital=no}}
		complete_effect={
			set_capital=195
		}
	}
	SOV_move_capital_moscow={
		icon = generic_civil_support
		allowed = {
			original_tag = SOV

		}
		visible={has_war_with=GER}
		available={
			219={is_capital=no}}
		complete_effect={
			set_capital=219
		}
	}


	#217 "Stalingrad"
	SOV_hold_stalingrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 217 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			has_civil_war = no
			217 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			217 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.1
		}
		#Fail
		complete_effect = {
			217 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.2
		}
	}

	#195 "Leningrad"
	SOV_hold_leningrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 195 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			has_civil_war = no
			195 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.3
		}
		#Fail
		complete_effect = {
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.4
		}
	}

	#219 "Moscow"
	SOV_hold_moscow = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 219 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			has_civil_war = no
			219 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.5
		}
		#Fail
		complete_effect = {
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.6
		}
	}
	
	SOV_hero_city_brzesc_litewski = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 94
		}

		visible = {
			controls_state = 94
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			94 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3392
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_odessa = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 192
		}

		visible = {
			controls_state = 192
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			192 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11670
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_kiev = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 202
		}

		visible = {
			controls_state = 202
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			202 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 525
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_dnipropetrovsk_zaporozhe = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 226
			controls_state = 200
		}

		visible = {
			controls_state = 226
			controls_state = 200			
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			226 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11437
					}
				}
			}
			200 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11405
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_gomel = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 241
		}

		visible = {
			controls_state = 241
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			241 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 9288
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_bryansk = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 224
		}

		visible = {
			controls_state = 224
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			224 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3335
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_kharkov = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 221
		}

		visible = {
			controls_state = 221
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			221 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 418
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_voronezh = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 260
		}

		visible = {
			controls_state = 260
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			260 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 413
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_leningrad = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 195
		}

		visible = {
			controls_state = 195
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			195 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3151
						id = 149
						id = 11091
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_stalingrad = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 217
		}

		visible = {
			controls_state = 217
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			217 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3529
						id = 11474
						id = 498
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_minsk = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 206
		}

		visible = {
			controls_state = 206
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			206 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11370
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_tula = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 223
		}

		visible = {
			controls_state = 223
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			223 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 6262
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_vitebsk_smolensk = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 207
			controls_state = 242
		}

		visible = {
			controls_state = 207
			controls_state = 242
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			207 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11241
					}
				}
			}
			242 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 306
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	SOV_hero_city_sevastopol = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 137
		}

		visible = {
			controls_state = 137
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			137 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3686
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_rostov = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 218
		}

		visible = {
			controls_state = 218
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			218 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 9417
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_krasnodar = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 234
		}

		visible = {
			controls_state = 234
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			234 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 3734
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_rzhev = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 246
		}

		visible = {
			controls_state = 246
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			246 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 11349
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_kalinin = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 247
		}

		visible = {
			controls_state = 247
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			247 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 6245
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_moscow = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 219
		}

		visible = {
			controls_state = 219
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			219 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 6414
						id = 6380
						id = 301
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	SOV_hero_city_baku = {

		icon = generic_scorched_earth

		allowed = { original_tag = SOV }

		available = {
			controls_state = 229
		}

		visible = {
			controls_state = 229
		}

		cost = 100
		fire_only_once = yes

		complete_effect = {
			229 = {
				add_province_modifier = {
					static_modifiers = { soviet_hero_city }
					province = {
						id = 7661
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}
