on_actions = {
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						original_tag = FRA
						has_government = democratic
					}
				}
				set_cosmetic_tag = FRA_FREE
			}
		}
	}

	on_subject_free = {
		effect = {
			if = {
				limit = {
					NOT = {
						AND = {
							TAG = SAF
							has_government = communism
						}
					}
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					TAG = INS
				}
				retire_country_leader = yes
			}
			if = {
				limit = {
					original_tag = RAJ
				}
				remove_ideas = {
					RAJ_quit_india_movement
					RAJ_marginalized_muslim_community
					RAJ_marginalized_muslim_community_angry
					RAJ_marginalized_muslim_community_happy
					RAJ_princely_states
					RAJ_princely_states_donations
					RAJ_princely_states_donations_troops
				}
			}
		}
	}

	on_subject_autonomy_level_change = {
		effect = {

			if = {
				limit = {
					OR = {
						has_autonomy_state = autonomy_colony
						has_autonomy_state = autonomy_dominion
					}
					OVERLORD = { is_in_tech_sharing_group = commonwealth_research }
				}
				add_to_tech_sharing_group = commonwealth_research
			}
		}
	}

	on_subject_annexed = {
	}


	on_puppet = {
		effect = {
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
					tag = HUN
					FROM = {
						has_country_flag = HUN_ROM_puppet_war
					}
				}
				ROM = { set_country_flag = ROM_HUN_aligned }
			}
			if = {
				limit = {
					AND = {
						OR = {
							TAG = SOV
							TAG = GER
						}
						SOV = { has_idea = SOV_molotov_ribbentrop_pact }
					}
				}
				SOV = { remove_ideas = SOV_molotov_ribbentrop_pact }
			}
			if = {
				limit = {
					tag = CAN
					NOT = {
						FROM = {
							tag = ENG
						}
					}
				}
				CAN = {
					abandon_colony_tag = yes
				}
			}
			if = {
				limit = {
					tag = CAN
					FROM = {
						tag = ENG
					}
					NOT = { has_dlc = "Together for Victory" }
				}
				CAN = {
					set_cosmetic_tag = CAN_ALY
				}
			}
			if = {
				limit = {
					tag = CAN
					FROM = {
						tag = ENG
					}
					has_dlc = "Together for Victory"
				}
				CAN = {
					set_cosmetic_tag = CAN_UK
				}
			}
		}
	}


	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
					tag = HUN
					FROM = {
						has_country_flag = HUN_ROM_puppet_war
					}
				}
				ROM = { set_country_flag = ROM_HUN_aligned }
			}
			if = {
				limit = {
					tag = CAN
					NOT = {
						FROM = {
							tag = ENG
						}
					}
				}
				CAN = {
					abandon_colony_tag = yes
				}
			}
			if = {
				limit = {
					tag = CAN
					FROM = {
						tag = ENG
					}
					NOT = { has_dlc = "Together for Victory" }
				}
				CAN = {
					set_cosmetic_tag = CAN_ALY
				}
			}
			if = {
				limit = {
					tag = CAN
					FROM = {
						tag = ENG
					}
					has_dlc = "Together for Victory"
				}
				CAN = {
					set_cosmetic_tag = CAN_UK
				}
			}
		}
	}

	on_release_as_free = {
		effect = {
			if = {
				limit = {
					tag = CAN
					NOT = {
						FROM = {
							tag = ENG
						}
					}
				}
				CAN = {
					abandon_colony_tag = yes
				}
			}
			if = {
				limit = {
					tag = CAN
					FROM = {
						tag = ENG
					}
					NOT = { has_dlc = "Together for Victory" }
				}
				CAN = {
					set_cosmetic_tag = CAN_ALY
				}
			}
			if = {
				limit = {
					tag = CAN
					FROM = {
						tag = ENG
					}
					has_dlc = "Together for Victory"
				}
				CAN = {
					set_cosmetic_tag = CAN_UK
				}
			}
		}
	}
}

